box: nodesource/trusty:7.2.1
build:
  steps:
    - script:
        name: installing dependencies
        code: |
          cd app
          npm install
    - script:
        name: running tests
        code: |
          cd app
          npm run test
    - script:
        name: running linter
        code: |
          cd app
          npm run lint
deploy:
  steps:
    - npm-install:
      cwd: app/
    - script:
      name: deploy to production
      code: |
        cd app
        ./node_modules/.bin/fly production
